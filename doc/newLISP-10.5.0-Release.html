<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>newLISP  v.10.5.0 Release Notes </title>

<style type="text/css" media="screen">

h1 {
	font-family:Optima, Georgia, Times New Roman, Times, serif; 
	font-size: 250%;
	font-weight: 500;
	color: #404040;
	}

h2, h3 {
	font-family: Lucida Sans, Helvetica,  sans-serif;
	color: #404040;
	line-height: 120%;
 	}

body, p {
	font-family: Lucida Sans, Helvetica,  sans-serif;
	color: #404040;
	line-height: 120%;
	font-size: 110%;
	max-width: 900px;
 	}

tt {
	font-family: Courier;
	color: #705040;
	line-height: 120%;
	}

em {
	font-family: Courier;
	color: #202020;
	}

li {
	margin-bottom: 15px;
	

</style>

</head>

<body>
<h1>newLISP<font size=-2>&#174;</font> v.10.5.0 Stable Release
<font color="red" size="-1">2013-05-21</font></h1>

<p>This stable release adds processing for JSON formatted data and support for 
unlimited precision, big integer arithmetic.</p>

<p>The link feature to produce selfcontained executables is now built-in as
a command-line option and works on all platforms.</p>

<p>Several other functions have enhanced options.</p>

<h3>Changes and additions</h3>
<ul>
<li>The functions <tt>json-parse</tt> and <tt>json-error</tt> allow fast parsing 
of JSON formatted text-data. The module <tt>json.lsp</tt> has been removed
from the distribution, but is still available at www.newlisp.org.</li>

<li>The integer operators, <tt>+ - * / % = < &lt;= > &gt;= !=</tt> and the
functions <tt>abs</tt>, <tt>even?</tt>, <tt>odd?</tt>, <tt>length</tt>,
<tt>number?</tt> and <tt>zero?</tt>
now accept big integers with unlimited precision. If the first argument in
any of these operators and functions is a big integer, the calculation
performed will be in big integer mode. Integer values greater than 9223372036854775807
or smaller than -9223372036854775808, or integers with an appended letter L,
will be processed in big integer mode - as in 123L -.  For details see the new 
manual section about big integers in chapter: 8. Evaluating newLISP expressions.</li>

<li>The new function <tt>bigint</tt> can be used to convert from integer, 
float values or strings to big integer.</li>

<li>The new predicate <tt>bigint?</tt> checks for big integer type.</li> 

<li>The function <tt>flat</tt> now can take an optional level parameter to limit flattening
a list to certain depth level: <tt>(flat &lt;list&gt; [&lt;level&gt;])</tt>.</li>

<li>The usage of <tt>$0</tt> in <tt>replace</tt> on lists (not regular 
expressions) has been eliminated. The count of replacements is now contained in 
the new <tt>$count</tt> system var, not <tt>$0</tt>, which is strictly reserved 
for regular espressions. This also speeds up <tt>replace</tt>.</li>

<li><tt>read-expr</tt> now uses <tt>$count</tt> instead of <tt>$0</tt> for the
number of characters processed.</li>

<li>When using option 8 in <tt>xml-parse</tt> to translate XML tags into newLISP
symbols, colons <tt>':'</tt> in XML namespace tags will be translated into 
a <tt>'.'</tt> dot.</li>

<li>Crtl-D in Unix will now emit a line-feed before exiting.</li>

<li>In the <tt>file?</tt> function, the <tt>true</tt> flag not only causes the
filename to be returned but now also implies that the filename is not a directory,
else <tt>nil</tt> is returned.</li>

<li>Using an addtional <tt>true</tt> flag in the <tt>real-path</tt> function,
the executable path of an executable is returned - similar to the UNIX
utility <em>which</em>. On Windows and BSDs, <tt>real-path</tt> now also veryfies
that path and file are valid, as it always did on non-BSD Unix (OSX, Linux).</li>

<li>On LINUX and BSD, when compiled with GNU libreadline support, a matching 
parenthesis will blink on the simple or multiple newLISP command line (REPL). 
For this, the line: <tt>set blink-matching-paren on</tt> should be put into the
Bash <tt>.inputrc</tt> configuration file.</li>

<li>newLISP server mode now sets the environment variable REMOTE_ADDR to the 
IP-string of the connecting client.</li>

<li>Debug mode for <tt>get-url</tt> now also outputs status line of remote
server.</li>

<li>Linking the newLISP exeutable and source code is now built-in via the new 
command line option <tt>-x</tt>. The file <tt>util/link.lsp</tt> is not 
required any more. Linking is now documented in chapter 4. about Command-line
options and works on all operating system platforms.</li>

<li>Extended command line buffer to 1024 (previously 512).</li>

<li>The parser now also accepts <tt>-.9</tt> as <tt>-0.9</tt> and <tt>+.9</tt> 
as <tt>+0.9</tt>.</li>

<li>The module <tt>sqlite3.lsp</tt> has added paths for the imported library (1).</li>

<li>Added <tt>make android_dist</tt> and <tt>make android_dist_utf8</tt> commands
for making <tt>newlisp-ndk-x.x.x.tgz</tt> and <tt>newlisp-ndk-utf8-x.x.x.tgz</tt> 
packages for compilation in the Android Native Development Kit (NDK). To run newLISP
on Android in server mode and to support data transfers of more than 4072 bytes
in the multiprocessing Cilk API and shared memory API, a <tt>/data/tmp</tt> 
directory must be present on the Android device. <tt>(sys-info -1)</tt> on
Android is 11 and <tt>ostype</tt> is <tt>"Linux"</tt>.
</li>

<li>The OSX Intel binary distribution is now 64-bit by default.</li>

</ul>

<h3>Bug fixes</h3>
<ul>

<li>When passing a wrong second parameter type to an uninitialized symbol in 
<tt>extend</tt>, the function crashed. Now an error exception will be thrown.</li>

<li>A fix for <tt>sort</tt> when the sorting function is generated at run-time.</li>

<li>When newLISP is compiled as a library big/small -endianess is now calculated 
as in the main version instead of always assuming big-endian. This affected
<tt>pack</tt>, <tt>unpack</tt> and <tt>get-int</tt> in the shared library version.
</li>

</ul>

<h3>Compatibility with previous versions</h3>
<p>Except for the usage of <tt>$0</tt> as outlined above and the behavior of
<tt>real-path</tt> on Windows, this version is compatible with previous versions 
in the 10.4 series of newLISP.</p>

<p>(1) Changes in module files are always posted immediately online at 
<a href="http://www.newlisp.org/modules/">www.newlisp.org/modules/</a>.</p>

<center>&part;</center>

</body>
</html>
